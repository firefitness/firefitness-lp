<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>伊福町店 体験予約 - FIREFITNESS</title>
    <script src="/js/analytics.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: #f5f5f5;
        }
        .reservation-container {
            width: 100%;
            min-height: 100vh;
        }
        #gym-reservation-widget {
            width: 100%;
            min-height: 100vh;
            border: none;
        }
    </style>
</head>
<body>
    <div class="reservation-container">
        <iframe
            id="gym-reservation-widget"
            src="https://gym-reservation-firefitnessyuma-gmailcoms-projects.vercel.app/widget/trial?location=ifuku&lockLocation=true&source=mainlp&hideHeader=false"
            allow="geolocation"
        ></iframe>
    </div>
    <script>
        // URLパラメータからsourceを取得してiframeに反映
        (function() {
            const urlParams = new URLSearchParams(window.location.search);
            const source = urlParams.get('source') || urlParams.get('utm_source') || 'mainlp';
            const campaign = urlParams.get('campaign') || urlParams.get('utm_campaign') || '';

            const iframe = document.getElementById('gym-reservation-widget');
            const iframeSrc = new URL(iframe.src);
            iframeSrc.searchParams.set('source', source);
            if (campaign) {
                iframeSrc.searchParams.set('campaign', campaign);
            }
            iframe.src = iframeSrc.toString();

            // GA4にページビューイベント送信
            if (typeof gtag === 'function') {
                gtag('event', 'reserve_page_view', {
                    'location': 'ifuku',
                    'source': source,
                    'campaign': campaign
                });
            }
        })();
    </script>
</body>
</html>
